//RUN: onnx-mlir --EmitONNXIR --run-torch-pass %s -o=%t >/dev/null && cat %t.onnx.mlir | FileCheck -v %s

module attributes {llvm.data_layout = "e-m:e-p270:32:32-p271:32:32-p272:64:64-i64:64-f80:128-n8:16:32:64-S128", llvm.target_triple = "x86_64-unknown-linux-gnu"}  {
  func @main_graph(%arg0: tensor<1x1x28x28xf32>) -> tensor<1x26x13x13xf32> attributes {input_names = ["input"], output_names = ["5"]} {
    %0 = "onnx.Constant"() {value = dense<"0xD091C93D4DBF043E60EC1B3ECDF4263A53BE0D3D3A12DDBD6040CDBD3D6433BE2AE98E3D7321EC3DB2783EBECD8CB23A277606BE4ADFD9BD3394D03D7388D9BC7FB94A3EF3D59D3CE5F0193E1A135C3CD5FC083EDA39C4BDAA43EB3D70FE18BE33DDEA3DB7E3F03D5AEF963DE54E103E67FFFC3B3397A8BB2DC43A3E12CD1ABE27F3A43C3337EF3CD3060B3E00A235BD0047D5BB337B95BB7DD40F3EAAB1E4BDF7E730BE5871093E02CD06BE352A3D3EAAC9133E5A68713D709EDDBD4A0B08BEB23002BE1AAB073DA73FC23C103E0F3EBA3522BD5A8A27BE0D7844BEB59B3BBE98BA11BE630FCFBD1DDFE93D53280BBD4D78CF3DF36576BD9A88A5BD004329BDE72F04BEA31B8EBD8D6EAB3C2A7A1EBE63CAD43D73A44B3ED273173E8D6988BC93AACFBDEB0A0D3E6DA3BC3DBA60583D436924BE9D7BCDBD9AD2573C22F9443E27CA1D3DD7FD41BEEA0C28BEB025C63DBAADB8BD00ADC83B52D2173E7372D9BD88BA3C3E6715483E676B6ABC4AE0113EBB184BBECD3618BC80160D3C4A8CCD3D0042CF3BA766ACBC6BBA3EBED381493D834003BE00F83BBC133E1C3D9A874BBEDAABACBC6756CDBC90A4FA3D402A1D3DCD603F3B550A1FBE404465BDB2B247BE1343CF3D4F94283EEAA0483EE7B6223ED3BBCBBDADCBE83DF3B1963D1FF0423E3A1AEFBD339684BCAA051C3E6D26633DE0C8CC3D08A60ABE1393D63D8745043E4DE1153E1DDE95BD00EFEBBD4BA5173ED0E6963D2D5BB8BDDA5B5C3D8F86123EDA81E9BD731242BD1383383E4DF41FBC9D6CDEBDC78315BEEDD03A3EE2FD37BEF3EDEFBD1ACE493E0D262DBDA58524BE8D31163E9A690E3B18992CBE2378E9BD70AE28BE775DFFBD330B93BAF3E1E13D40F65CBD97B7E6BD333386B8CDF19DBB6D90A23D4DE4E0BC15772D3E007F783CC72F063D00902EBD770827BEAB45483E6F3A1F3E9A19E63A08913C3E804D4BBD4D406DBC736A42BD00455F3D805B2DBE00F22D3BD3F212BE67ED81BCE30DDDBD1A59283EF360DCBD933144BE00018DBD27EB81BC2BFF09BE1B58393E9A3D92BD8D58EBBC9A028DBDD7C1243E53F0C1BD87E87EBD63FB35BEED4ACF3DB3AE563DC5B00FBEF32679BD83753E3E675F893DCDA1E1BC23CB88BD8A69B3BD33C4EBBDAD4D14BD276CB63D072011BD1AB17ABDBD62CDBD07663C3D1A4D9FBDE239013E73A0D13D7A4D903D3366883C7B8A43BEE0860CBDBDB3173ED0D5B63D5560263EBADFFF3DFD75A53DC36A08BE982B003EB0C1D2BDE86D263E93392E3D75790C3EEB543CBEC001CFBC203B3ABD7F8343BE0F75283E330AABBCD059803D20D7363D8D2E99BCA722F53C2D9EB53DE7B7FC3D40EE913D9F79363EEAD0ADBD2D21C9BDCF530BBE70CD8B3DED2BAFBD3309413C8D93133D379CB23D6DF6453E0078193ECD3EB6BC1ACD84BC2F412B3EA502143E4FF6353EB06B3E3E9AD2133C8D743CBD72B522BEC04E873CE7D2623C405C4B3D25EB113EEAB3013E9ADCFC3DC0FF3D3DB82E2A3EA75F783D42A239BE67BCE8BB43E4FB3DE0A08FBD730ABD3CCDB8D9BC47560A3D4A6043BE2754043D05EF01BEE348043EC784063E0AFA2C3EDB11433E379BD93D4D5ACEBCD3A425BEF053AE3D9A69113D0F261DBEE015AFBDD23E203E7D3799BDCBF331BE2DB4493EC03A303E0D2BFA3D00AFB43B0389FB3DFDC5D13D6AF32DBED5324BBE47105ABDDD009D3D671C8C3BE7CC433CC7FCDF3D5BA23F3EF37B143E9FB5333EEB2522BECF2441BEC09D073DF75F40BE2A3CB63D80603FBCADC32ABDE0F9493E93EA94BDE893413EE32C25BE9A84F8BD6F4537BEB3C5783CB78B453E857340BE005EE5BC93CEECBD40AA6B3D9ACBA7BD43DCD13D4086B8BD0BD2293E5D72FB3D0AC3D13DB32DDD3DA09BCB3DBF8331BEFABA933DF0E0CA3DBBDC223ED7F30EBE5D8DBABD55F1093E3201063EB3CA9DBD5805383E7F0B33BE337DAFBC9A55CF3B2D1ED7BD12DA2EBEE7E155BD2DBA3EBE67DEDF3D4DDBB73DC05434BD1A18E93C38F5463E60B5193ED35F453E67023E3C00DEE73C6B100CBEB3D15DBC1343A3BDE36C41BEB30109BE77E18B3D00D78EBDF04D9EBDD32828BD2A23313E8BC4213EDA83DABC8091513D80CF72BCF3D2703DBF1B1FBEE7185CBCE73470BD3A8237BDFA19F83D7D98DCBD87424F3D6058C43DC3DA3EBE33B9A23B5AF62A3E670297BD2747603DDB8739BEC03D873C03D19E3D38EB163E600E07BD6337093EDDB029BE1A3D63BC9379AF3DEBF93EBE73CA043E0077323C452B38BE937B103D8D4DBEBCB7083EBEA52B3D3EA78EFC3DC328C8BD0074633B6789EB3B13AA793D606F093D23BB8FBD7D50FABD62361D3E7A195B3D8AC6EBBD954E093E1A0F4BBD9DC69CBD9AD395BDB30C873C9DAA9E3D002516BE5712D5BDB370213DC7DE1D3E0D183A3E6FFE09BED71E013EBAACFCBDBAC11EBEC08B9A3C73FED13DBF6D393EC34EBD3D4A19FF3DBD68E8BD47EF233D9A52C23C73DC93BDCB27173EBAEC0F3E784C3D3E20509FBD5D20EA3D070E233EEA77CD3DA71CA0BDB374693D9ADCEA3B8F940F3E9F9C39BEF047E9BD5D0AF7BD674E18BC00E6EFBBDAF1EA3C3F52303E2B2F4C3EB34103BDE78C813C0A7D053E9AB6A63C3358A0BBB3C347BE67DE833B3334533D92AC333EA339ABBD2A68C93D97F51DBE555C42BE80ECF43CED03B63D00DDB5BB332511BC0D4013BD03C91B3E7BFB353E9B754CBE271D96BC33AF2A3EF5B934BE0313003EA80E433ED787FE3DDA691A3E0B282F3E5A7B8BBDB3C8D33C33D703BDCD768E3CCD5F2BBC408C3EBE5A4A103D1A09C43C6FBB2D3E07E496BD90F1B73D0D3B5B3D284F1FBE5A4DCABCA7E7783D9F3E343ED37E2EBD5AB3D3BC278D963C38173EBE1D5BF8BD6A4CDABDED9A173EE5AC3E3E6D9CE73D6AE9043ECD59923CAD64B6BDD3A3ECBD1D8F083EF7E5BF3D6376F23DCD58B43A4A7919BE837FF8BD8D6A333DF8DE0D3E8D63C53D32E63D3E0A9193BD6A8C9DBDB081933D4DB052BD231EED3D4DD1203DCD787F3C4D07103CFD5BD53DED4E3D3D6766613D98681CBE005ADD3C6572093E1DB8313EEAEF0A3E171B39BE5DDAF13D08CD1B3EAD7538BD8A1A4B3E028B363E9ADD50BC875B493DE7A727BECA9749BE00B82B3BF7DF9B3DB3A96DBDBAF1E73D33F45E3CD3D89D3D807D413E27E676BDB32462BC733C4EBD82E536BE5B15223EA04B8E3D53760C3E3D75E33DE7E0273D4A60853D0064493E776511BE8DBBE23D856200BE379DD7BD17C4193ECDB1ABBB0769A4BDCDCC24BD9DDFEA3D004A00BCF0DEF0BD2363C8BD8DFC933D9A79B9BC1FCD21BE0AA141BE7717F03DDA20D4BDCDED993BDA3ACA3DDD79BDBD9AD1A8BB276238BDA74C3C3E3AAE30BEC3C30EBE7D12B13D83A180BDC01A343E6BCF3CBEE367BA3D9799CBBD63E588BD5027D13D2DA0BBBD002F8E3D6DE8533D33C0DFBCA7BDD13D1A08F73DC738493E6DB6A23DB3C501BEBFA02EBEE3F245BE33C7353C6AF246BE00059CBBCD3998BD6F601D3E33754BBD9A77183B90FFEF3DCA55033E35973F3E3DBC983D8711493D8781923D4090A0BCB8A84A3EC086B33DE7B424BE00101D3BD348113E600A27BE6BDD1F3E8A188EBDC53E1F3E0B4B0B3E132C0FBEA7B2403D67F6323A934C233DE27D1A3ECD9EE9BBCAA2253E"> : tensor<26x1x5x5xf32>} : () -> tensor<26x1x5x5xf32>
    %1 = "onnx.Constant"() {value = dense<[-0.0684868842, -0.0577786453, 0.141013891, -0.0920972153, 0.128918633, 0.0273608696, 0.00894258078, -0.085247375, -0.0821276679, -0.0425586216, -0.0547861569, 0.10515549, 0.186646134, 0.0672790557, -0.143839031, 0.158396319, -0.030371381, -0.00787265319, 0.0451157354, 0.0328948274, 0.108056761, 0.0260973703, -0.101072788, -0.0465707555, -0.196033075, -0.105192877]> : tensor<26xf32>} : () -> tensor<26xf32>
//CHECK: [[STRIDE:%.]] = torch.prim.ListConstruct %int1{{_*[0-9]*}}, %int1{{_*[0-9]*}} :
    //CHECK: [[DILATION:%.]] = torch.prim.ListConstruct %int1{{_*[0-9]*}}, %int1{{_*[0-9]*}} :
    //CHECK: [[PAD:%.]] = torch.prim.ListConstruct %int1, %int1{{_*[0-9]*}} :
    %2 = "onnx.Conv"(%arg0, %0, %1) {dilations = [1, 1], group = 1 : si64, kernel_shape = [5, 5], onnx_node_name = "Conv_0", pads = [1, 1, 1, 1], strides = [1, 1]} : (tensor<1x1x28x28xf32>, tensor<26x1x5x5xf32>, tensor<26xf32>) -> tensor<1x26x26x26xf32>
//CHECK: torch.aten.conv2d %arg0, %{{[0-9]}}, %{{[0-9]}}, [[STRIDE]], [[PAD]], [[DILATION]], %int1{{_*[0-9]*}} : !torch.vtensor<[1,1,28,28],f32>, !torch.vtensor<[26,1,5,5],f32>, !torch.vtensor<[26],f32>, !torch.list<int>, !torch.list<int>, !torch.list<int>, !torch.int -> !torch.vtensor<[1,26,26,26],f32>
    %3 = "onnx.MaxPoolSingleOut"(%2) {kernel_shape = [2, 2], onnx_node_name = "MaxPool_1", pads = [0, 0, 0, 0], strides = [2, 2]} : (tensor<1x26x26x26xf32>) -> tensor<1x26x13x13xf32>
    %4 = "onnx.LeakyRelu"(%3) {alpha = 0.00999999977 : f32, onnx_node_name = "LeakyRelu_2"} : (tensor<1x26x13x13xf32>) -> tensor<1x26x13x13xf32>
    return %4 : tensor<1x26x13x13xf32>
  }
  "onnx.EntryPoint"() {func = @main_graph, numInputs = 1 : i32, numOutputs = 1 : i32, signature = "[    { \22type\22 : \22f32\22 , \22dims\22 : [1 , 1 , 28 , 28] , \22name\22 : \22input\22 }\0A\0A]\00@[   { \22type\22 : \22f32\22 , \22dims\22 : [1 , 26 , 13 , 13] , \22name\22 : \225\22 }\0A\0A]\00"} : () -> ()
}
